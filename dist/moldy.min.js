!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.moldy=t()}}(function(){return function t(e,r,n){function o(i,s){if(!r[i]){if(!e[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=r[i]={exports:{}};e[i][0].call(c.exports,function(t){var r=e[i][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(t,e,r){(function(t){var r=function(){"use strict";function e(r,n,o,a){function s(r,o){if(null===r)return null;if(0==o)return r;var u,p;if("object"!=typeof r)return r;if(e.__isArray(r))u=[];else if(e.__isRegExp(r))u=new RegExp(r.source,i(r)),r.lastIndex&&(u.lastIndex=r.lastIndex);else if(e.__isDate(r))u=new Date(r.getTime());else{if(l&&t.isBuffer(r))return u=new t(r.length),r.copy(u),u;"undefined"==typeof a?(p=Object.getPrototypeOf(r),u=Object.create(p)):(u=Object.create(a),p=a)}if(n){var d=c.indexOf(r);if(-1!=d)return f[d];c.push(r),f.push(u)}for(var y in r){var h;p&&(h=Object.getOwnPropertyDescriptor(p,y)),h&&null==h.set||(u[y]=s(r[y],o-1))}return u}var u;"object"==typeof n&&(o=n.depth,a=n.prototype,u=n.filter,n=n.circular);var c=[],f=[],l="undefined"!=typeof t;return"undefined"==typeof n&&(n=!0),"undefined"==typeof o&&(o=1/0),s(r,o)}function r(t){return Object.prototype.toString.call(t)}function n(t){return"object"==typeof t&&"[object Date]"===r(t)}function o(t){return"object"==typeof t&&"[object Array]"===r(t)}function a(t){return"object"==typeof t&&"[object RegExp]"===r(t)}function i(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return e.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},e.__objToStr=r,e.__isDate=n,e.__isArray=o,e.__isRegExp=a,e.__getRegExpFlags=i,e}();"object"==typeof e&&e.exports&&(e.exports=r)}).call(this,t("buffer").Buffer)},{buffer:3}],2:[function(t,e,r){function n(t){return t?o(t):void 0}function o(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],3:[function(t,e,r){function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);var o=typeof t;if("base64"===e&&"string"===o)for(t=O(t);t.length%4!==0;)t+="=";var a;if("number"===o)a=U(t);else if("string"===o)a=n.byteLength(t,e);else{if("object"!==o)throw new Error("First argument needs to be a number, array or string.");a=U(t.length)}var i;n._useTypedArrays?i=n._augment(new Uint8Array(a)):(i=this,i.length=a,i._isBuffer=!0);var s;if(n._useTypedArrays&&"number"==typeof t.byteLength)i._set(t);else if(L(t))for(s=0;a>s;s++)n.isBuffer(t)?i[s]=t.readUInt8(s):i[s]=t[s];else if("string"===o)i.write(t,0,e);else if("number"===o&&!n._useTypedArrays&&!r)for(s=0;a>s;s++)i[s]=0;return i}function o(t,e,r,o){r=Number(r)||0;var a=t.length-r;o?(o=Number(o),o>a&&(o=a)):o=a;var i=e.length;J(i%2===0,"Invalid hex string"),o>i/2&&(o=i/2);for(var s=0;o>s;s++){var u=parseInt(e.substr(2*s,2),16);J(!isNaN(u),"Invalid hex string"),t[r+s]=u}return n._charsWritten=2*s,s}function a(t,e,r,o){var a=n._charsWritten=P($(e),t,r,o);return a}function i(t,e,r,o){var a=n._charsWritten=P(M(e),t,r,o);return a}function s(t,e,r,n){return i(t,e,r,n)}function u(t,e,r,o){var a=n._charsWritten=P(D(e),t,r,o);return a}function c(t,e,r,o){var a=n._charsWritten=P(N(e),t,r,o);return a}function f(t,e,r){return 0===e&&r===t.length?W.fromByteArray(t):W.fromByteArray(t.slice(e,r))}function l(t,e,r){var n="",o="";r=Math.min(t.length,r);for(var a=e;r>a;a++)t[a]<=127?(n+=C(o)+String.fromCharCode(t[a]),o=""):o+="%"+t[a].toString(16);return n+C(o)}function p(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;r>o;o++)n+=String.fromCharCode(t[o]);return n}function d(t,e,r){return p(t,e,r)}function y(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var o="",a=e;r>a;a++)o+=S(t[a]);return o}function h(t,e,r){for(var n=t.slice(e,r),o="",a=0;a<n.length;a+=2)o+=String.fromCharCode(n[a]+256*n[a+1]);return o}function b(t,e,r,n){n||(J("boolean"==typeof r,"missing or invalid endian"),J(void 0!==e&&null!==e,"missing offset"),J(e+1<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var a;return r?(a=t[e],o>e+1&&(a|=t[e+1]<<8)):(a=t[e]<<8,o>e+1&&(a|=t[e+1])),a}}function _(t,e,r,n){n||(J("boolean"==typeof r,"missing or invalid endian"),J(void 0!==e&&null!==e,"missing offset"),J(e+3<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var a;return r?(o>e+2&&(a=t[e+2]<<16),o>e+1&&(a|=t[e+1]<<8),a|=t[e],o>e+3&&(a+=t[e+3]<<24>>>0)):(o>e+1&&(a=t[e+1]<<16),o>e+2&&(a|=t[e+2]<<8),o>e+3&&(a|=t[e+3]),a+=t[e]<<24>>>0),a}}function g(t,e,r,n){n||(J("boolean"==typeof r,"missing or invalid endian"),J(void 0!==e&&null!==e,"missing offset"),J(e+1<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var a=b(t,e,r,!0),i=32768&a;return i?-1*(65535-a+1):a}}function v(t,e,r,n){n||(J("boolean"==typeof r,"missing or invalid endian"),J(void 0!==e&&null!==e,"missing offset"),J(e+3<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var a=_(t,e,r,!0),i=2147483648&a;return i?-1*(4294967295-a+1):a}}function m(t,e,r,n){return n||(J("boolean"==typeof r,"missing or invalid endian"),J(e+3<t.length,"Trying to read beyond buffer length")),V.read(t,e,r,23,4)}function w(t,e,r,n){return n||(J("boolean"==typeof r,"missing or invalid endian"),J(e+7<t.length,"Trying to read beyond buffer length")),V.read(t,e,r,52,8)}function A(t,e,r,n,o){o||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof n,"missing or invalid endian"),J(void 0!==r&&null!==r,"missing offset"),J(r+1<t.length,"trying to write beyond buffer length"),F(e,65535));var a=t.length;if(!(r>=a))for(var i=0,s=Math.min(a-r,2);s>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function E(t,e,r,n,o){o||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof n,"missing or invalid endian"),J(void 0!==r&&null!==r,"missing offset"),J(r+3<t.length,"trying to write beyond buffer length"),F(e,4294967295));var a=t.length;if(!(r>=a))for(var i=0,s=Math.min(a-r,4);s>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function j(t,e,r,n,o){o||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof n,"missing or invalid endian"),J(void 0!==r&&null!==r,"missing offset"),J(r+1<t.length,"Trying to write beyond buffer length"),R(e,32767,-32768));var a=t.length;r>=a||(e>=0?A(t,e,r,n,o):A(t,65535+e+1,r,n,o))}function I(t,e,r,n,o){o||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof n,"missing or invalid endian"),J(void 0!==r&&null!==r,"missing offset"),J(r+3<t.length,"Trying to write beyond buffer length"),R(e,2147483647,-2147483648));var a=t.length;r>=a||(e>=0?E(t,e,r,n,o):E(t,4294967295+e+1,r,n,o))}function x(t,e,r,n,o){o||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof n,"missing or invalid endian"),J(void 0!==r&&null!==r,"missing offset"),J(r+3<t.length,"Trying to write beyond buffer length"),q(e,3.4028234663852886e38,-3.4028234663852886e38));var a=t.length;r>=a||V.write(t,e,r,n,23,4)}function k(t,e,r,n,o){o||(J(void 0!==e&&null!==e,"missing value"),J("boolean"==typeof n,"missing or invalid endian"),J(void 0!==r&&null!==r,"missing offset"),J(r+7<t.length,"Trying to write beyond buffer length"),q(e,1.7976931348623157e308,-1.7976931348623157e308));var a=t.length;r>=a||V.write(t,e,r,n,52,8)}function O(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function B(t,e,r){return"number"!=typeof t?r:(t=~~t,t>=e?e:t>=0?t:(t+=e,t>=0?t:0))}function U(t){return t=~~Math.ceil(+t),0>t?0:t}function T(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function L(t){return T(t)||n.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function S(t){return 16>t?"0"+t.toString(16):t.toString(16)}function $(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);if(127>=n)e.push(t.charCodeAt(r));else{var o=r;n>=55296&&57343>=n&&r++;for(var a=encodeURIComponent(t.slice(o,r+1)).substr(1).split("%"),i=0;i<a.length;i++)e.push(parseInt(a[i],16))}}return e}function M(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function N(t){for(var e,r,n,o=[],a=0;a<t.length;a++)e=t.charCodeAt(a),r=e>>8,n=e%256,o.push(n),o.push(r);return o}function D(t){return W.toByteArray(t)}function P(t,e,r,n){for(var o=0;n>o&&!(o+r>=e.length||o>=t.length);o++)e[o+r]=t[o];return o}function C(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function F(t,e){J("number"==typeof t,"cannot write a non-number as a number"),J(t>=0,"specified a negative value for writing an unsigned value"),J(e>=t,"value is larger than maximum value for type"),J(Math.floor(t)===t,"value has a fractional component")}function R(t,e,r){J("number"==typeof t,"cannot write a non-number as a number"),J(e>=t,"value larger than maximum allowed value"),J(t>=r,"value smaller than minimum allowed value"),J(Math.floor(t)===t,"value has a fractional component")}function q(t,e,r){J("number"==typeof t,"cannot write a non-number as a number"),J(e>=t,"value larger than maximum allowed value"),J(t>=r,"value smaller than minimum allowed value")}function J(t,e){if(!t)throw new Error(e||"Failed assertion")}var W=t("base64-js"),V=t("ieee754");r.Buffer=n,r.SlowBuffer=n,r.INSPECT_MAX_BYTES=50,n.poolSize=8192,n._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(r){return!1}}(),n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.isBuffer=function(t){return!(null===t||void 0===t||!t._isBuffer)},n.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"hex":r=t.length/2;break;case"utf8":case"utf-8":r=$(t).length;break;case"ascii":case"binary":case"raw":r=t.length;break;case"base64":r=D(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;default:throw new Error("Unknown encoding")}return r},n.concat=function(t,e){if(J(T(t),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===t.length)return new n(0);if(1===t.length)return t[0];var r;if("number"!=typeof e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var o=new n(e),a=0;for(r=0;r<t.length;r++){var i=t[r];i.copy(o,a),a+=i.length}return o},n.prototype.write=function(t,e,r,n){if(isFinite(e))isFinite(r)||(n=r,r=void 0);else{var f=n;n=e,e=r,r=f}e=Number(e)||0;var l=this.length-e;r?(r=Number(r),r>l&&(r=l)):r=l,n=String(n||"utf8").toLowerCase();var p;switch(n){case"hex":p=o(this,t,e,r);break;case"utf8":case"utf-8":p=a(this,t,e,r);break;case"ascii":p=i(this,t,e,r);break;case"binary":p=s(this,t,e,r);break;case"base64":p=u(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":p=c(this,t,e,r);break;default:throw new Error("Unknown encoding")}return p},n.prototype.toString=function(t,e,r){var n=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,r=void 0!==r?Number(r):r=n.length,r===e)return"";var o;switch(t){case"hex":o=y(n,e,r);break;case"utf8":case"utf-8":o=l(n,e,r);break;case"ascii":o=p(n,e,r);break;case"binary":o=d(n,e,r);break;case"base64":o=f(n,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=h(n,e,r);break;default:throw new Error("Unknown encoding")}return o},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.copy=function(t,e,r,o){var a=this;if(r||(r=0),o||0===o||(o=this.length),e||(e=0),o!==r&&0!==t.length&&0!==a.length){J(o>=r,"sourceEnd < sourceStart"),J(e>=0&&e<t.length,"targetStart out of bounds"),J(r>=0&&r<a.length,"sourceStart out of bounds"),J(o>=0&&o<=a.length,"sourceEnd out of bounds"),o>this.length&&(o=this.length),t.length-e<o-r&&(o=t.length-e+r);var i=o-r;if(100>i||!n._useTypedArrays)for(var s=0;i>s;s++)t[s+e]=this[s+r];else t._set(this.subarray(r,r+i),e)}},n.prototype.slice=function(t,e){var r=this.length;if(t=B(t,r,0),e=B(e,r,r),n._useTypedArrays)return n._augment(this.subarray(t,e));for(var o=e-t,a=new n(o,void 0,!0),i=0;o>i;i++)a[i]=this[i+t];return a},n.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},n.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},n.prototype.readUInt8=function(t,e){return e||(J(void 0!==t&&null!==t,"missing offset"),J(t<this.length,"Trying to read beyond buffer length")),t>=this.length?void 0:this[t]},n.prototype.readUInt16LE=function(t,e){return b(this,t,!0,e)},n.prototype.readUInt16BE=function(t,e){return b(this,t,!1,e)},n.prototype.readUInt32LE=function(t,e){return _(this,t,!0,e)},n.prototype.readUInt32BE=function(t,e){return _(this,t,!1,e)},n.prototype.readInt8=function(t,e){if(e||(J(void 0!==t&&null!==t,"missing offset"),J(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length)){var r=128&this[t];return r?-1*(255-this[t]+1):this[t]}},n.prototype.readInt16LE=function(t,e){return g(this,t,!0,e)},n.prototype.readInt16BE=function(t,e){return g(this,t,!1,e)},n.prototype.readInt32LE=function(t,e){return v(this,t,!0,e)},n.prototype.readInt32BE=function(t,e){return v(this,t,!1,e)},n.prototype.readFloatLE=function(t,e){return m(this,t,!0,e)},n.prototype.readFloatBE=function(t,e){return m(this,t,!1,e)},n.prototype.readDoubleLE=function(t,e){return w(this,t,!0,e)},n.prototype.readDoubleBE=function(t,e){return w(this,t,!1,e)},n.prototype.writeUInt8=function(t,e,r){r||(J(void 0!==t&&null!==t,"missing value"),J(void 0!==e&&null!==e,"missing offset"),J(e<this.length,"trying to write beyond buffer length"),F(t,255)),e>=this.length||(this[e]=t)},n.prototype.writeUInt16LE=function(t,e,r){A(this,t,e,!0,r)},n.prototype.writeUInt16BE=function(t,e,r){A(this,t,e,!1,r)},n.prototype.writeUInt32LE=function(t,e,r){E(this,t,e,!0,r)},n.prototype.writeUInt32BE=function(t,e,r){E(this,t,e,!1,r)},n.prototype.writeInt8=function(t,e,r){r||(J(void 0!==t&&null!==t,"missing value"),J(void 0!==e&&null!==e,"missing offset"),J(e<this.length,"Trying to write beyond buffer length"),R(t,127,-128)),e>=this.length||(t>=0?this.writeUInt8(t,e,r):this.writeUInt8(255+t+1,e,r))},n.prototype.writeInt16LE=function(t,e,r){j(this,t,e,!0,r)},n.prototype.writeInt16BE=function(t,e,r){j(this,t,e,!1,r)},n.prototype.writeInt32LE=function(t,e,r){I(this,t,e,!0,r)},n.prototype.writeInt32BE=function(t,e,r){I(this,t,e,!1,r)},n.prototype.writeFloatLE=function(t,e,r){x(this,t,e,!0,r)},n.prototype.writeFloatBE=function(t,e,r){x(this,t,e,!1,r)},n.prototype.writeDoubleLE=function(t,e,r){k(this,t,e,!0,r)},n.prototype.writeDoubleBE=function(t,e,r){k(this,t,e,!1,r)},n.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),J("number"==typeof t&&!isNaN(t),"value is not a number"),J(r>=e,"end < start"),r!==e&&0!==this.length){J(e>=0&&e<this.length,"start out of bounds"),J(r>=0&&r<=this.length,"end out of bounds");for(var n=e;r>n;n++)this[n]=t}},n.prototype.inspect=function(){for(var t=[],e=this.length,n=0;e>n;n++)if(t[n]=S(this[n]),n===r.INSPECT_MAX_BYTES){t[n+1]="...";break}return"<Buffer "+t.join(" ")+">"},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n._useTypedArrays)return new n(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var X=n.prototype;n._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=X.get,t.set=X.set,t.write=X.write,t.toString=X.toString,t.toLocaleString=X.toString,t.toJSON=X.toJSON,t.copy=X.copy,t.slice=X.slice,t.readUInt8=X.readUInt8,t.readUInt16LE=X.readUInt16LE,t.readUInt16BE=X.readUInt16BE,t.readUInt32LE=X.readUInt32LE,t.readUInt32BE=X.readUInt32BE,t.readInt8=X.readInt8,t.readInt16LE=X.readInt16LE,t.readInt16BE=X.readInt16BE,t.readInt32LE=X.readInt32LE,t.readInt32BE=X.readInt32BE,t.readFloatLE=X.readFloatLE,t.readFloatBE=X.readFloatBE,t.readDoubleLE=X.readDoubleLE,t.readDoubleBE=X.readDoubleBE,t.writeUInt8=X.writeUInt8,t.writeUInt16LE=X.writeUInt16LE,t.writeUInt16BE=X.writeUInt16BE,t.writeUInt32LE=X.writeUInt32LE,t.writeUInt32BE=X.writeUInt32BE,t.writeInt8=X.writeInt8,t.writeInt16LE=X.writeInt16LE,t.writeInt16BE=X.writeInt16BE,t.writeInt32LE=X.writeInt32LE,t.writeInt32BE=X.writeInt32BE,t.writeFloatLE=X.writeFloatLE,t.writeFloatBE=X.writeFloatBE,t.writeDoubleLE=X.writeDoubleLE,t.writeDoubleBE=X.writeDoubleBE,t.fill=X.fill,t.inspect=X.inspect,t.toArrayBuffer=X.toArrayBuffer,t}},{"base64-js":4,ieee754:5}],4:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===i||e===l?62:e===s||e===p?63:u>e?-1:u+10>e?e-u+26+26:f+26>e?e-f:c+26>e?e-c+26:void 0}function r(t){function r(t){c[l++]=t}var n,o,i,s,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;u="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,c=new a(3*t.length/4-u),i=u>0?t.length-4:t.length;var l=0;for(n=0,o=0;i>n;n+=4,o+=3)s=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&s)>>16),r((65280&s)>>8),r(255&s);return 2===u?(s=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&s)):1===u&&(s=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(s>>8&255),r(255&s)),c}function o(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,a,i,s=t.length%3,u="";for(o=0,i=t.length-s;i>o;o+=3)a=(t[o]<<16)+(t[o+1]<<8)+t[o+2],u+=r(a);switch(s){case 1:a=t[t.length-1],u+=e(a>>2),u+=e(a<<4&63),u+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],u+=e(a>>10),u+=e(a>>4&63),u+=e(a<<2&63),u+="="}return u}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),p="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=o}("undefined"==typeof r?this.base64js={}:r)},{}],5:[function(t,e,r){r.read=function(t,e,r,n,o){var a,i,s=8*o-n-1,u=(1<<s)-1,c=u>>1,f=-7,l=r?o-1:0,p=r?-1:1,d=t[e+l];for(l+=p,a=d&(1<<-f)-1,d>>=-f,f+=s;f>0;a=256*a+t[e+l],l+=p,f-=8);for(i=a&(1<<-f)-1,a>>=-f,f+=n;f>0;i=256*i+t[e+l],l+=p,f-=8);if(0===a)a=1-c;else{if(a===u)return i?NaN:(d?-1:1)*(1/0);i+=Math.pow(2,n),a-=c}return(d?-1:1)*i*Math.pow(2,a-n)},r.write=function(t,e,r,n,o,a){var i,s,u,c=8*a-o-1,f=(1<<c)-1,l=f>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,y=n?1:-1,h=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,i=f):(i=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-i))<1&&(i--,u*=2),e+=i+l>=1?p/u:p*Math.pow(2,1-l),e*u>=2&&(i++,u/=2),i+l>=f?(s=0,i=f):i+l>=1?(s=(e*u-1)*Math.pow(2,o),i+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),i=0));o>=8;t[r+d]=255&s,d+=y,s/=256,o-=8);for(i=i<<o|s,c+=o;c>0;t[r+d]=255&i,d+=y,i/=256,c-=8);t[r+d-y]|=128*h}},{}],6:[function(t,e,r){var n=t("sc-contains"),o=t("sc-is"),a=function(t,e,r,i,s){var u,c,f=e.toLowerCase(),l=o.an.array(i)?i:[];switch(!0){case"object"===f:null===t&&(t=r);break;case/float|integer/.test(f):f="number"}if(o.a.hasOwnProperty(f)?c=o.a[f](t):"*"===f&&(c=!0),c)u=t;else switch(!0){case"array"===f:try{if(o.a.string(t)&&(u=JSON.parse(t)),o.not.an.array(u))throw""}catch(p){o.not.nullOrUndefined(t)&&(u=[t])}break;case"boolean"===f:try{u=/^(true|1|y|yes)$/i.test(t.toString())?!0:void 0}catch(p){}if(o.not.a["boolean"](u))try{u=/^(false|-1|0|n|no)$/i.test(t.toString())?!1:void 0}catch(p){}u=o.a["boolean"](u)?u:void 0;break;case"date"===f||"datetime"===f:try{u=new Date(t),u=null===t||isNaN(u.getTime())?void 0:u}catch(p){}break;case"string"===f:o.a.string(t)&&(u=t),(o.a["boolean"](t)||o.a.number(t))&&(u=t.toString());break;case"number"===f:try{if(o.a.array(t)||o.a.guid(t))throw"wrong number";u=parseFloat(t),(o.not.a.number(u)||isNaN(u))&&(u=void 0)}catch(p){u=void 0}if(void 0!==u)switch(!0){case"integer"===e:u=parseInt(u,10)}break;default:try{u=a(JSON.parse(t),f)}catch(p){}}return l.length>0&&!n(l,u)&&(u=l[0]),c||o.not.undefined(u)?u:o.not.undefined(r)?r:null};e.exports=a},{"sc-contains":7,"sc-is":11}],7:[function(t,e,r){var n=function(t,e){var r=!1;return Array.isArray(t)?t.forEach(function(t){r===!1&&e===t&&(r=!0)}):Object(t)===t&&Object.keys(t).forEach(function(n){r===!1&&t[n]===e&&(r=!0)}),r};e.exports=n},{}],8:[function(t,e,r){var n="{?[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}}?";r.generate=function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:7&r|8).toString(16)});return e},r.match=function(t){var e=new RegExp(n,"g"),r=("string"==typeof t?t:"").match(e);return Array.isArray(r)?r:[]},r.isValid=function(t){var e=new RegExp(n);return e.test(t)}},{}],9:[function(t,e,r){function n(t,e,r){t="object"===o(t)?t:{},e="array"===o(e)?e:[],r="string"===o(r)?r:"";var i=e.length>0?e.shift():"",s=a.call(t,i)||void 0!==t[i],u=s?t[i]:void 0,c=o(u)===r;return e.length>0&&s?n(t[i],e,r):e.length>0||""===r?s:s&&c}var o=t("type-component"),a=Object.prototype.hasOwnProperty;e.exports=function(t,e,r){return e="string"===o(e)?e.split("."):[],n(t,e,r)}},{"type-component":10}],10:[function(t,e,r){var n=Object.prototype.toString;e.exports=function(t){switch(n.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},{}],11:[function(t,e,r){var n=t("./ises/type"),o={a:{},an:{},not:{a:{},an:{}}},a={arguments:["arguments",n("arguments")],array:["array",n("array")],"boolean":["boolean",n("boolean")],date:["date",n("date")],"function":["function","func","fn",n("function")],"null":["null",n("null")],number:["number","integer","int",n("number")],object:["object",n("object")],regexp:["regexp",n("regexp")],string:["string",n("string")],undefined:["undefined",n("undefined")],empty:["empty",t("./ises/empty")],nullorundefined:["nullOrUndefined","nullorundefined",t("./ises/nullorundefined")],guid:["guid",t("./ises/guid")]};Object.keys(a).forEach(function(t){var e=a[t].slice(0,a[t].length-1),r=a[t][a[t].length-1];e.forEach(function(t){o[t]=o.a[t]=o.an[t]=r,o.not[t]=o.not.a[t]=o.not.an[t]=function(){return r.apply(this,arguments)?!1:!0}})}),r=e.exports=o,r.type=n},{"./ises/empty":12,"./ises/guid":13,"./ises/nullorundefined":14,"./ises/type":15}],12:[function(t,e,r){var n=t("../type");e.exports=function(t){var e=!1;return"null"===n(t)||"undefined"===n(t)?e=!0:"object"===n(t)?e=0===Object.keys(t).length:"boolean"===n(t)?e=t===!1:"number"===n(t)?e=0===t||-1===t:("array"===n(t)||"string"===n(t))&&(e=0===t.length),e}},{"../type":16}],13:[function(t,e,r){var n=t("sc-guid");e.exports=function(t){return n.isValid(t)}},{"sc-guid":8}],14:[function(t,e,r){e.exports=function(t){return null===t||void 0===t||void 0===t}},{}],15:[function(t,e,r){var n=t("../type");e.exports=function(t){return function(e){return n(e)===t}}},{"../type":16}],16:[function(t,e,r){var n=Object.prototype.toString;e.exports=function(t){switch(n.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},{}],17:[function(t,e,r){var n=t("component-type"),o=function(){var t=Array.prototype.slice.call(arguments),e="boolean"===n(t[0])?t.shift():!1,r=t,a={};return r.forEach(function(t){"object"===n(t)&&Object.getOwnPropertyNames(t).forEach(function(r){Object.prototype.hasOwnProperty.call(t,r)&&(e&&"object"===n(t[r])?a[r]=o(e,{},a[r],t[r]):e&&Array.isArray(t[r])?a[r]=(Array.isArray(a[r])?a[r]:[]).concat(t[r]):a[r]=t[r])})}),a};e.exports=o},{"component-type":18}],18:[function(t,e,r){(function(t){var r=Object.prototype.toString;e.exports=function(e){switch(r.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!==e?"nan":e&&1===e.nodeType?"element":"undefined"!=typeof t&&t.isBuffer(e)?"buffer":(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e),typeof e)}}).call(this,t("buffer").Buffer)},{buffer:3}],19:[function(t,e,r){var n=function(t){var e={},r=Array.isArray(t)?t:[],n=function(t,n){var o=Array.prototype.slice.call(arguments,1);return e[t]?e[t].apply(r,o):r["__"+t].apply(r,o)};return Object.defineProperties(r,{on:{value:function(t,r){e[t]=r}}}),Object.defineProperty(r,"pop",{value:function(){return n("pop",r[r.length-1])}}),Object.defineProperty(r,"__pop",{value:function(){return Array.prototype.pop.apply(r,arguments)}}),Object.defineProperty(r,"shift",{value:function(){return n("shift",r[0])}}),Object.defineProperty(r,"__shift",{value:function(){return Array.prototype.shift.apply(r,arguments)}}),["push","reverse","unshift","sort","splice"].forEach(function(t){var e={};e[t]={value:n.bind(null,t)},e["__"+t]={value:function(e){return Array.prototype[t].apply(r,arguments)}},Object.defineProperties(r,e)}),r};e.exports=n},{}],20:[function(t,e,r){e.exports={defaults:{baseUrl:"",headers:{}}}},{}],21:[function(t,e,r){var n=t("./config.json"),o={adapters:{__default:void 0},use:function(t){if(!(t&&t.name&&t.create&&t.find&&t.findOne&&t.save&&t.destroy))throw new Error("Invalid Adapter");this.adapters.__default||(this.adapters.__default=t),this.adapters[t.name]=t}},a=t("./moldy")(t("./model"),n.defaults,o.adapters);o.extend=function(t,e){return new a(t,e)},r=e.exports=o,r.defaults=n.defaults},{"./config.json":20,"./model":23,"./moldy":24}],22:[function(t,e,r){var n=t("sc-is"),o=t("sc-cast"),a=t("sc-merge"),i=t("clone");r.attributes=function(t,e){var r;return r=n.a.string(e)?{type:e}:n.an.object(e)&&e.__isMoldy===!0?{type:"moldy","default":e}:e,a({name:t||"",type:"","default":null,optional:!1},r)},r.getProperty=function(t){return function(){return this.__data[t]}},r.destroyedError=function(t){var e="object"==typeof t?t:{};return new Error("The given moldy item `"+e.__name+"` has been destroyed")},r.setBusy=function(t){return function(){t.busy=!0}},r.clone=function(t){return t&&!t.__moldy&&("object"==typeof t||t instanceof Array)?i(t):t},r.last=function(t){return t&&t.hasOwnProperty("length")?t[Math.max(t.length-1,0)]:null},r.setProperty=function(t){return function(e){var r=this,n=r.__attributes[t],a=Array.isArray(n.values)?n.values:[],i=n.type?o(e,n.type,n["default"],a):e;r.__data[t]!==i&&(r.emit("change",r.__data[t],i),r.__diff[t]=!0),r.__data[t]=i}},r.unsetBusy=function(t){return function(){t.busy=!1}},r.noop=function(){};var s=function(t){return Array.prototype.slice.call(arguments,1).forEach(function(e){if(e)for(var r in e)t[r]=e[r]}),t};r.extend=s,r.extendObject=function(t,e){var r,n=this;r=t&&Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},s(r,n,e);var o=function(){this.constructor=r};return o.prototype=n.prototype,r.prototype=new o,t&&s(r.prototype,t),r.__super__=n.prototype,r}},{clone:1,"sc-cast":6,"sc-is":11,"sc-merge":17}],23:[function(t,e,r){var n=t("sc-cast"),o=t("emitter-component"),a=t("sc-guid"),i=t("sc-haskey"),s=t("./helpers"),u=t("sc-is"),c=s.extendObject,f=function(t,e){var r=this,o=t||{};this.__moldy=e,this.__isMoldy=!0,this.__attributes={},this.__data={},this.__diff={},this.__destroyed=!1,r.__moldy.__keyless||r.__moldy.$defineProperty(r,r.__moldy.__key),Object.keys(n(r.__moldy.__metadata,"object",{})).forEach(function(t){r.__moldy.$defineProperty(r,t,o[t])}),this.__diff={}};f.prototype.$clear=function(){var t=this;Object.keys(t.__moldy.__metadata).forEach(function(e){if(i(t[e],"__isMoldy","boolean")&&t[e].__isMoldy===!0)t[e].$clear();else if(t.__attributes[e].arrayOfAType)for(;t[e].length>0;)t[e].shift();else t[e]=t.__data[e]=void 0})},f.prototype.$clone=function(t){var e=this.$json();s.extend(e,t||{});var r=this.__moldy.create(e);return r},f.prototype.$data=function(t,e){var r=this,n=u.object(t)?t:{},o=s.extend({mergeArrayOfAType:!0},e);if(r.__destroyed)return s.destroyedError(r);var a=r.__diff;return r.__diff=[],Object.keys(n).forEach(function(t){if(r.__attributes.hasOwnProperty(t))if(u.an.array(n[t])&&i(r.__attributes[t],"arrayOfAType","boolean")&&r.__attributes[t].arrayOfAType===!0){if(o.mergeArrayOfAType!==!0)for(;r[t].length;)r[t].shift();n[t].forEach(function(e){r[t].push(e)})}else u.a.object(n[t])&&r[t]instanceof f?r[t].$data(n[t],e):r[t]=n[t]}),r.__diff=a,r},f.prototype.$destroy=function(t){var e=this,r=a.generate(),n=e.$isDirty(),o=e.$json(),i="delete",c=u.a.func(t)?t:s.noop;return e.__destroyed?c.apply(e,[s.destroyedError(e)]):(e.__moldy.emit("busy",r),e.emit("predestroy",{moldy:e,data:o,method:i,callback:c}),void(n?c&&c(new Error("This moldy cannot be destroyed because it has not been saved to the server yet.")):e.__moldy.__adapter[e.__moldy.__adapterName].destroy.call(e.__moldy,e.$json(),function(t,n){!t||t instanceof Error||(t=new Error("An unknown error occurred")),e.__moldy.emit("busy:done",r),e.emit("destroy",t,n),e.__destroyed=!0,e[e.__moldy.__key]=void 0,c&&c(t,n)})))},f.prototype.$isDirty=function(){return this.__destroyed?!0:u.empty(this[this.__moldy.__key])},f.prototype.$isValid=function(){if(this.__destroyed)return!1;var t=this,e=!0;return Object.keys(t.__attributes).forEach(function(r){if(!t.$isDirty()||r!==t.__moldy.__key){var n=t[r],o=t.__attributes[r],a=o.type,s=i(o,"arrayOfAType","boolean")?o.arrayOfAType===!0:!1,c=o.optional!==!0,l=t.__moldy.__keyless?!1:s?0===n.length:u.nullOrUndefined(n),p=u.not.empty(a)&&u.a.string(a)?u.not.a[a](n):l;s&&u.not.empty(n)&&n[0]instanceof f&&n.forEach(function(t){e&&t.$isValid()===!1&&(e=!1)}),e&&c&&p&&(e=!1)}}),e},f.prototype.$json=function(t){var e=this,r=e.__data,n={};return t=t||{},Object.keys(r).filter(function(n){return!t.diff||"id"===n||e.__data[n]instanceof Array||r[n]&&r[n].__moldy||e.__diff[n]}).forEach(function(e){u.an.array(r[e])&&r[e][0]instanceof f?(n[e]=[],r[e].forEach(function(r){n[e].push(r.$json(t))})):u.a.date(r[e])?n[e]=r[e].toISOString():n[e]=r[e]instanceof f?r[e].$json(t):r[e]}),n},f.prototype.$update=function(t){return this.$isDirty()?this.$save(t):void this.$do({method:"save",isDirectOperation:!1,data:this.$json({diff:!0})},t)},f.prototype.$save=function(t,e){var r=arguments[0],o=s.last(arguments),a=u.a.object(r)&&u.not.a.func(r);
this.$do({method:this.$isDirty()?"create":"save",isDirectOperation:a,data:n(r,"object",this.$json())},o)},f.prototype.$do=function(t,e){var r=this,n=null,o=a.generate(),c=t.data,f=s.last(arguments);f=u.a.func(f)?f:s.noop,r.__destroyed=!1,r.__moldy.emit("busy",o),r.emit("presave",{moldy:r,data:c,method:t.method,callback:f});var l=i(c,r.__key)&&u.not.empty(c[r.__key]),p=function(e,a){!e||e instanceof Error||(e=new Error("An unknown error occurred")),!e&&t.isDirty&&u.object(a)&&l&&!i(a,r.__moldy.__key)&&(e=new Error("The response from the server did not contain a valid `"+r.__moldy.__key+"`")),!e&&t.isDirty&&u.object(a)&&(r.__moldy[r.__moldy.__key]=a[r.__moldy.__key]),n||r.$data(a,{mergeArrayOfAType:!1}),r.emit("save",e,r),r.__moldy.emit("busy:done",o),f&&f(e,r,a)};r.__diff=[],t.isDirectOperation?r.__moldy.__adapter[r.__moldy.__adapterName][t.method].call(r.__moldy,c,t.isDirectOperation,p):r.__moldy.__adapter[r.__moldy.__adapterName][t.method].call(r.__moldy,c,p)},o(f.prototype),f.extend=c,r=e.exports=f},{"./helpers":22,"emitter-component":2,"sc-cast":6,"sc-guid":8,"sc-haskey":9,"sc-is":11}],24:[function(t,e,r){var n=t("./helpers"),o=t("emitter-component"),a=t("sc-guid"),i=t("sg-observable-array"),s=t("sc-haskey"),u=t("sc-is"),c=t("sc-merge"),f=t("sc-cast");e.exports=function(t,e,r){var l=function(t,r){var n=this,o=u.an.object(r)?r:{};o.initial||{};Object.defineProperties(n,{__moldy:{value:!0},__properties:{value:o.properties||{}},__adapterName:{value:o.adapter||"__default"},__metadata:{value:{}},__custom:{value:o.custom||{}},__baseUrl:{value:f(o.baseUrl,"string",""),writable:!0},__data:{value:{},writable:!0},__destroyed:{value:!1,writable:!0},__headers:{value:c({},f(o.headers,"object",{}),f(e.headers,"object",{})),writable:!0},__key:{value:f(o.key,"string","id")||"id",writable:!0},__keyless:{value:o.keyless===!0},__name:{value:t||o.name||"",writable:!0},__url:{value:f(o.url,"string",""),writable:!0},busy:{value:!1,writable:!0}}),n.__keyless||this.$property(this.__key),Object.keys(f(n.__properties,"object",{})).forEach(function(t){n.$property(t,n.__properties[t])})};return l.prototype.schema=function(t){return Object.keys(f(t,"object",{})).forEach(function(e){self.$property(e,t[e])}),this},l.prototype.adapter=function(t){if(!t||!this.__adapter[t])throw new Error("Provide a valid adpater ");return this.__adapterName=t,this},l.prototype.proto=function(t){return this.__properties.proto=this.__properties.proto||{},n.extend(this.__properties.proto,t),this},l.prototype.create=function(e){var r=t.extend(this.__properties.proto||{});return new r(e,this)},l.prototype.$headers=function(t){var e=this;return e.__destroyed?n.destroyedError(e):(e.__headers=u.an.object(t)?t:e.__headers,u.not.an.object(t)?e.__headers:e)},l.prototype.$findOne=function(t,e){var r,o=this,i=a.generate(),s=o.$url(),c="findOne",f=u.an.object(t)?t:{},l=u.a.func(t)?t:u.a.func(e)?e:n.noop;o.__destroyed;o.emit("busy",i),o.emit("prefindOne",{moldy:o,method:c,query:f,url:s,callback:l}),o.__destroyed=!1;var p=o.__adapter[o.__adapterName];if(!p)throw new Error("Can not find the "+o.__adapterName+". Please install it in your dependencies or devDependencies");p.findOne.call(o,f,function(t,e){!t||t instanceof Error||(t=new Error("An unknown error occurred")),t&&l&&l(t),r=u.empty(e)?void 0:u.array(e)?o.create(e[0]):o.create(e),o.emit("busy:done",i),o.emit("findOne",t,r),l&&l(t,r)})},l.prototype.$url=function(t){var e=this,r=u.empty(e.$baseUrl())?"":e.$baseUrl(),n=u.empty(e.__name)?"":"/"+e.__name.trim().replace(/^\//,""),o=t||e.__url||"",a=r+n+(u.empty(o)?"":"/"+o.trim().replace(/^\//,""));return e.__url=o.trim().replace(/^\//,""),u.not.a.string(t)?a:e},l.prototype.__adapter=r,l.prototype.$baseUrl=function(t){var r=this,n=f(t,"string",r.__baseUrl||"");return r.__baseUrl=n.trim().replace(/(\/|\s)+$/g,"")||e.baseUrl||"",u.not.a.string(t)?r.__baseUrl:r},l.prototype.$find=function(e,r){var o=this,i=a.generate(),s=o.$url(),c="find",l=[],p=u.an.object(e)?e:{},d=u.a.func(e)?e:u.a.func(r)?r:n.noop;o.emit("busy",i),o.emit("prefind",{moldy:o,method:c,query:p,url:s,callback:d});var y=o.__adapter[o.__adapterName];if(!y)throw new Error("Can not find the "+o.__adapterName+" moldy adapter. Please install it in your dependencies or devDependencies");y.find.call(o,p,function(e,r){!e||e instanceof Error||(e=new Error("An unknown error occurred")),e&&d&&d(e),u.array(r)?r.forEach(function(t){l.push(o.create(t))}):l.push(o.create(_data));var n=f(l instanceof t||u.an.array(l)?l:null,"array",[]);o.emit("busy:done",i),o.emit("find",e,n),d&&d(e,n)})},l.prototype.$defineProperty=function(t,e,r){var o=this,a=t[e]||r,s=o.__metadata[e];if(!t.hasOwnProperty(e)||!t.__attributes.hasOwnProperty(e)){if((s.valueIsAnArrayMoldy||s.valueIsAnArrayString)&&(s.attributes.type=s.value,s.attributeArrayTypeIsAMoldy=s.valueIsAnArrayMoldy,s.attributeArrayTypeIsAString=s.valueIsAnArrayString,s.attributeTypeIsAnArray=!0),s.attributeTypeIsAnInstantiatedMoldy)Object.defineProperty(t,e,{value:n.clone(s.attributes["default"]),enumerable:!0}),t.__data[e]=t[e];else if(s.valueIsAStaticMoldy)Object.defineProperty(t,e,{value:new l(s.value.name,s.value).create(a),enumerable:!0}),t.__data[e]=t[e];else if(s.attributeTypeIsAnArray){var c=i([]),p=s.attributeArrayTypeIsAString||s.attributeArrayTypeIsAMoldy?s.attributes.type[0]:"*";s.attributes.arrayOfAType=!0,Object.defineProperty(t,e,{value:c,enumerable:!0}),t.__data[e]=t[e],["push","unshift"].forEach(function(t){c.on(t,function(){var e=Array.prototype.slice.call(arguments),r=[];return e.forEach(function(t){if(s.attributeArrayTypeIsAMoldy){var e=new l(p.name,p),o=u.an.object(t)?t:n.clone(s.attributes["default"]);r.push(e.create(o))}else r.push(f(t,p,n.clone(s.attributes["default"])))}),c["__"+t].apply(c,r)})}),a&&a.length>0&&a.forEach(function(r){t[e].push(r)})}else Object.defineProperty(t,e,{get:n.getProperty(e),set:n.setProperty(e),enumerable:!0});t.__attributes[e]=s.attributes}void 0!==a?t[e]=a:u.empty(t[e])&&s.attributes.optional===!1&&u.not.nullOrUndefined(s.attributes["default"])?t[e]=n.clone(s.attributes["default"]):u.empty(t[e])&&s.attributes.optional===!1&&(s.attributeTypeIsAnArray||s.attributeTypeIsAnInstantiatedMoldy?t.__data[e]=t[e]:t.__data[e]=u.empty(s.attributes.type)?void 0:f(void 0,s.attributes.type))},l.prototype.$property=function(t,e){var r=this,o=new n.attributes(t,e),a=u.a.string(o.type)&&/moldy/.test(o.type),i=u.an.array(o.type),c=u.an.array(e)&&s(e[0],"properties","object"),f=u.an.array(e)&&u.a.string(e[0]),l=i&&s(o.type[0],"properties","object"),p=i&&u.a.string(o.type[0])&&u.not.empty(o.type[0]),d=s(e,"properties","object");return r.__metadata[t]={attributes:o,value:e,attributeTypeIsAnInstantiatedMoldy:a,attributeTypeIsAnArray:i,valueIsAnArrayMoldy:c,valueIsAnArrayString:f,attributeArrayTypeIsAMoldy:l,attributeArrayTypeIsAString:p,valueIsAStaticMoldy:d},r},o(l.prototype),l}},{"./helpers":22,"emitter-component":2,"sc-cast":6,"sc-guid":8,"sc-haskey":9,"sc-is":11,"sc-merge":17,"sg-observable-array":19}]},{},[21])(21)});