!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.moldy=t()}}(function(){return function t(e,r,n){function o(s,i){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!i&&u)return u(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e){function r(t){return t?n(t):void 0}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;o>n;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],2:[function(t,e){var r=t("sc-contains"),n=t("sc-is"),o=function(t,e,a,s){var i,u=e,c=n.an.array(s)?s:[];switch(!0){case/float|integer/.test(u):u="number"}if(n.a[u](t)||"*"===u)i=t;else switch(!0){case"array"===u:try{if(n.a.string(t)&&(i=JSON.parse(t)),n.not.an.array(i))throw""}catch(l){n.not.nullOrUndefined(t)&&(i=[t])}break;case"boolean"===u:try{i=/^(true|1|y|yes)$/i.test(t.toString())?!0:void 0}catch(l){}if(n.not.a.boolean(i))try{i=/^(false|-1|0|n|no)$/i.test(t.toString())?!1:void 0}catch(l){}i=n.a.boolean(i)?i:void 0;break;case"date"===u:try{i=new Date(t),i=isNaN(i.getTime())?void 0:i}catch(l){}break;case"string"===u:try{if(i=JSON.stringify(t),n.undefined(i))throw""}catch(l){try{i=t.toString()}catch(l){}}break;case"number"===u:try{i=parseFloat(t),(n.not.a.number(i)||isNaN(i))&&(i=void 0)}catch(l){i=void 0}if(void 0!==i)switch(!0){case"integer"===e:i=parseInt(i)}break;default:try{i=o(JSON.parse(t),u)}catch(l){}}return c.length>0&&!r(c,i)&&(i=c[0]),n.not.undefined(i)?i:n.not.undefined(a)?a:null};e.exports=o},{"sc-contains":3,"sc-is":7}],3:[function(t,e){var r=function(t,e){var r=!1;return Array.isArray(t)?t.forEach(function(t){r===!1&&e===t&&(r=!0)}):Object(t)===t&&Object.keys(t).forEach(function(n){r===!1&&t[n]===e&&(r=!0)}),r};e.exports=r},{}],4:[function(t,e,r){var n="{?[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}}?";r.generate=function(){var t=(new Date).getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?r:7&r|8).toString(16)});return e},r.match=function(t){var e=new RegExp(n,"g"),r=("string"==typeof t?t:"").match(e);return Array.isArray(r)?r:[]},r.isValid=function(t){var e=new RegExp(n);return e.test(t)}},{}],5:[function(t,e){function r(t,e,a){t="object"===n(t)?t:{},e="array"===n(e)?e:[],a="string"===n(a)?a:"";var s=e.length>0?e.shift():"",i=o.call(t,s)||void 0!==t[s],u=i?t[s]:void 0,c=n(u)===a;return e.length>0&&i?r(t[s],e,a):e.length>0||""===a?i:i&&c}var n=t("type-component"),o=Object.prototype.hasOwnProperty;e.exports=function(t,e,o){return e="string"===n(e)?e.split("."):[],r(t,e,o)}},{"type-component":6}],6:[function(t,e){var r=Object.prototype.toString;e.exports=function(t){switch(r.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},{}],7:[function(t,e,r){var n=t("./ises/type"),o={a:{},an:{},not:{a:{},an:{}}},a={arguments:["arguments",n("arguments")],array:["array",n("array")],"boolean":["boolean",n("boolean")],date:["date",n("date")],"function":["function","func","fn",n("function")],"null":["null",n("null")],number:["number","integer","int",n("number")],object:["object",n("object")],regexp:["regexp",n("regexp")],string:["string",n("string")],undefined:["undefined",n("undefined")],empty:["empty",t("./ises/empty")],nullorundefined:["nullOrUndefined","nullorundefined",t("./ises/nullorundefined")],guid:["guid",t("./ises/guid")]};Object.keys(a).forEach(function(t){var e=a[t].slice(0,a[t].length-1),r=a[t][a[t].length-1];e.forEach(function(t){o[t]=o.a[t]=o.an[t]=r,o.not[t]=o.not.a[t]=o.not.an[t]=function(){return r.apply(this,arguments)?!1:!0}})}),r=e.exports=o,r.type=n},{"./ises/empty":8,"./ises/guid":9,"./ises/nullorundefined":10,"./ises/type":11}],8:[function(t,e){var r=t("../type");e.exports=function(t){var e=!1;return"null"===r(t)||"undefined"===r(t)?e=!0:"object"===r(t)?e=0===Object.keys(t).length:"boolean"===r(t)?e=t===!1:"number"===r(t)?e=0===t||-1===t:("array"===r(t)||"string"===r(t))&&(e=0===t.length),e}},{"../type":12}],9:[function(t,e){var r=t("sc-guid");e.exports=function(t){return r.isValid(t)}},{"sc-guid":4}],10:[function(t,e){e.exports=function(t){return null===t||void 0===t||void 0===t}},{}],11:[function(t,e){var r=t("../type");e.exports=function(t){return function(e){return r(e)===t}}},{"../type":12}],12:[function(t,e){var r=Object.prototype.toString;e.exports=function(t){switch(r.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},{}],13:[function(t,e){var r=t("type-component"),n=function(){var t=Array.prototype.slice.call(arguments),e="boolean"===r(t[0])?t.shift():!1,o=t,a={};return o.forEach(function(t){"object"===r(t)&&Object.keys(t).forEach(function(o){Object.prototype.hasOwnProperty.call(t,o)&&(a[o]=e&&"object"===r(t[o])?n(e,{},a[o],t[o]):t[o])})}),a};e.exports=n},{"type-component":14}],14:[function(t,e){e.exports=t(6)},{}],15:[function(t,e){var r=function(t){var e={},r=Array.isArray(t)?t:[],n=function(t){var n=Array.prototype.slice.call(arguments,1);return e[t]?e[t].apply(r,n):r["__"+t].apply(r,n)};return Object.defineProperties(r,{on:{value:function(t,r){e[t]=r}}}),Object.defineProperty(r,"pop",{value:function(){return n("pop",r[r.length-1])}}),Object.defineProperty(r,"__pop",{value:function(){return Array.prototype.pop.apply(r,arguments)}}),Object.defineProperty(r,"shift",{value:function(){return n("shift",r[0])}}),Object.defineProperty(r,"__shift",{value:function(){return Array.prototype.shift.apply(r,arguments)}}),["push","reverse","unshift","sort","splice"].forEach(function(t){var e={};e[t]={value:n.bind(null,t)},e["__"+t]={value:function(){return Array.prototype[t].apply(r,arguments)}},Object.defineProperties(r,e)}),r};e.exports=r},{}],16:[function(t,e){e.exports={defaults:{middlewareKey:"all"}}},{}],17:[function(t,e){var r=t("sc-is"),n=t("./config.json"),o=function(){},a=function(t,e,n){return r.not.empty(e)&&r.a.string(e)?(r.not.an.array(t[e])&&(t[e]=[]),r.a.func(n)&&t[e].push(n),t[e]):void 0},s=function(){this.functions={all:[]}};s.prototype.use=function(){var t=this,e=Array.prototype.slice.call(arguments),s=r.a.string(e[0])?e.shift():n.defaults.middlewareKey,i=r.a.func(e[0])?e.shift():o;i===o&&r.an.object(e[0])&&(i=e.shift().setup()),a(t.functions,s,i)},s.prototype.middleware=function(){var t=this,e=0,s=Array.prototype.slice.call(arguments),i=r.a.string(s[0])&&r.a.func(s[1])?s.shift():n.defaults.middlewareKey,u=r.a.func(s[0])?s.shift():o;a(t.functions,i);var c=function(){var r=t.functions[i][e++],n=Array.prototype.slice.call(arguments);r?(n.push(c),r.apply(t.context,n)):u.apply(t.context,n)};c.apply(t.context,s)},s.prototype.clear=function(t){r.a.string(t)&&r.not.empty(t)?this.functions[t]=[]:this.functions={all:[]}},e.exports=function(t){var e=new s;r.an.object(t)?(Object.defineProperties(t,{use:{value:function(){return e.use.apply(e,arguments),t}},middleware:{value:function(){e.middleware.apply(e,arguments)}},useify:{value:e}}),e.context=t):r.a.fn(t)&&(t.prototype.middleware=function(){e.context=this,e.middleware.apply(e,arguments)},t.use=function(){return e.use.apply(e,arguments),this},t.useify=e)}},{"./config.json":16,"sc-is":7}],18:[function(t,e){e.exports={defaults:{baseUrl:"",headers:{}}}},{}],19:[function(t,e,r){var n=t("./config.json"),o={},a=t("useify");a(o);var s=t("./moldy")(t("./model"),n.defaults,o.middleware);o.extend=function(t,e){return new s(t,e)},r=e.exports=o,r.defaults=n.defaults},{"./config.json":18,"./model":21,"./moldy":22,useify:17}],20:[function(t,e,r){var n=t("sc-is"),o=t("sc-cast"),a=t("sc-merge");r.attributes=function(t,e){var r;return r=n.a.string(e)?{type:e}:n.an.object(e)&&e.__isMoldy===!0?{type:"moldy","default":e}:e,a({name:t||"",type:"","default":null,optional:!1},r)},r.getProperty=function(t){return function(){return this.__data[t]}},r.destroyedError=function(t){var e="object"==typeof t?t:{};return new Error("The given moldy item `"+e.__name+"` has been destroyed")},r.setBusy=function(t){return function(){t.busy=!0}},r.setProperty=function(t){return function(e){var r=this,n=r.__attributes[t],a=n.type?o(e,n.type,n["default"]):e;r.__data[t]!==a&&r.emit("change",r.__data[t],a),r.__data[t]=a}},r.unsetBusy=function(t){return function(){t.busy=!1}},r.noop=function(){};var s=function(t){return Array.prototype.slice.call(arguments,1).forEach(function(e){if(e)for(var r in e)t[r]=e[r]}),t};r.extend=s,r.extendObject=function(t,e){var r,n=this;r=t&&Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},s(r,n,e);var o=function(){this.constructor=r};return o.prototype=n.prototype,r.prototype=new o,t&&s(r.prototype,t),r.__super__=n.prototype,r}},{"sc-cast":2,"sc-is":7,"sc-merge":13}],21:[function(t,e,r){var n=t("sc-cast"),o=t("emitter-component"),a=t("sc-haskey"),s=t("./helpers"),i=t("sc-is"),u=(t("sc-merge"),t("./request")),c=s.extendObject,l=t("useify"),y=function(t,e){var r=this;t=t||{},this.__moldy=e,this.__isMoldy=!0,this.__attributes={},this.__data={},this.__destroyed=!1,r.__moldy.__keyless||r.__moldy.$defineProperty(r,r.__moldy.__key),Object.keys(n(r.__moldy.__metadata,"object",{})).forEach(function(e){r.__moldy.$defineProperty(r,e,t[e])});for(var o in t)t.hasOwnProperty(o)&&r.__moldy.__metadata[o]&&(this[o]=t[o]);r.on("presave",s.setBusy(r)),r.on("save",s.unsetBusy(r)),r.on("predestroy",s.setBusy(r)),r.on("destroy",s.unsetBusy(r))};y.prototype.$clear=function(){var t=this;Object.keys(t.__moldy.__metadata).forEach(function(e){if(a(t[e],"__isMoldy","boolean")&&t[e].__isMoldy===!0)t[e].$clear();else if(t.__attributes[e].arrayOfAType)for(;t[e].length>0;)t[e].shift();else t[e]=t.__data[e]=void 0})},y.prototype.$clone=function(t){var e=this.$json();s.extend(e,t||{});var r=this.__moldy.create(e);return r},y.prototype.$data=function(t){var e=this,r=i.object(t)?t:{};return e.__destroyed?s.destroyedError(e):(Object.keys(r).forEach(function(t){e.__attributes.hasOwnProperty(t)&&(i.an.array(r[t])&&a(e.__attributes[t],"arrayOfAType","boolean")&&e.__attributes[t].arrayOfAType===!0?r[t].forEach(function(r){e[t].push(r)}):i.a.object(r[t])&&e[t]instanceof y?e[t].$data(r[t]):e[t]=r[t])}),e)},y.prototype.$destroy=function(t){var e=this,r=e.$isDirty(),n=e.$json(),o=e.__moldy.$url()+(e.__moldy.__keyless?"":"/"+e[e.__moldy.__key]),a="delete",c=i.a.func(t)?t:s.noop;return e.__destroyed?c.apply(e,[s.destroyedError(e)]):(e.emit("predestroy",{moldy:e,data:n,method:a,url:o,callback:c}),void(r?c.apply(e,[new Error("This moldy cannot be destroyed because it has not been saved to the server yet.")]):u(e.__moldy,e,n,a,o,function(t,r){e.emit("destroy",t,r),e.__destroyed=!0,e[e.__moldy.__key]=void 0,c.apply(e,arguments)})))},y.prototype.$isDirty=function(){return this.__destroyed?!0:i.empty(this[this.__moldy.__key])},y.prototype.$isValid=function(){if(this.__destroyed)return!1;var t=this,e=!0;return Object.keys(t.__attributes).forEach(function(r){if(!t.$isDirty()||r!==t.__moldy.__key){var n=t[r],o=t.__attributes[r],s=o.type,u=a(o,"arrayOfAType","boolean")?o.arrayOfAType===!0:!1,c=o.optional!==!0,l=t.__moldy.__keyless?!1:u?0===n.length:i.nullOrUndefined(n),p=i.not.empty(s)&&i.a.string(s)?i.not.a[s](n):l;u&&i.not.empty(n)&&n[0]instanceof y&&n.forEach(function(t){e&&t.$isValid()===!1&&(e=!1)}),e&&c&&p&&(e=!1)}}),e},y.prototype.$json=function(){var t=this,e=t.__data,r={};return Object.keys(e).forEach(function(t){i.an.array(e[t])&&e[t][0]instanceof y?(r[t]=[],e[t].forEach(function(e){r[t].push(e.$json())})):r[t]=e[t]instanceof y?e[t].$json():e[t]}),r},y.prototype.$save=function(t){var e=this,r=e.$isDirty(),n=e.$json(),o=e.__moldy.$url()+(r||e.__moldy.__keyless?"":"/"+e[e.__moldy.__key]),a=r?"post":"put",c=i.a.func(t)?t:s.noop;e.__destroyed=!1,e.emit("presave",{moldy:e,data:n,method:a,url:o,callback:c}),u(e.__moldy,e,n,a,o,function(t,r){e.emit("save",t,r),c.apply(e,arguments)})},o(y.prototype),l(y),y.extend=c,r=e.exports=y},{"./helpers":20,"./request":23,"emitter-component":1,"sc-cast":2,"sc-haskey":5,"sc-is":7,"sc-merge":13,useify:17}],22:[function(t,e){var r=t("./helpers/index"),n=t("emitter-component"),o=t("sg-observable-array"),a=t("sc-haskey"),s=t("sc-is"),i=t("sc-merge"),u=t("sc-cast"),c=t("./request"),l=t("useify");e.exports=function(t,e,y){var p=function(t,n){{var o=this,a=s.an.object(n)?n:{};a.initial||{}}Object.defineProperties(o,{__moldy:{value:!0},__properties:{value:a.properties||{}},__metadata:{value:{}},__baseUrl:{value:u(a.baseUrl,"string",""),writable:!0},__data:{value:{},writable:!0},__destroyed:{value:!1,writable:!0},__headers:{value:i({},u(a.headers,"object",{}),u(e.headers,"object",{})),writable:!0},__key:{value:u(a.key,"string","id")||"id",writable:!0},__keyless:{value:a.keyless===!0},__name:{value:t||a.name||""},__url:{value:u(a.url,"string",""),writable:!0},busy:{value:!1,writable:!0}}),o.__keyless||this.$property(this.__key),Object.keys(u(o.__properties,"object",{})).forEach(function(t){o.$property(t,o.__properties[t])}),o.on("preget",r.setBusy(o)),o.on("get",r.unsetBusy(o))};return p.prototype.schema=function(t){return Object.keys(u(t,"object",{})).forEach(function(e){self.$property(e,t[e])}),this},p.prototype.proto=function(t){return this.__properties.proto=this.__properties.proto||{},r.extend(this.__properties.proto,t),this},p.prototype.create=function(e){var r=this,n=t.extend(this.__properties.proto||{}),o=new n(e,this);return o.on("save",r.emit.bind(r,"save")),o.on("destroy",r.emit.bind(r,"destroy")),o},p.prototype.$headers=function(t){var e=this;return e.__destroyed?r.destroyedError(e):(e.__headers=s.an.object(t)?t:e.__headers,s.not.an.object(t)?e.__headers:e)},p.prototype.$get=function(t,e){var n=this,o=n.$url(),a="get",i=s.an.object(t)?t:{},u=s.a.func(t)?t:s.a.func(e)?e:r.noop;wasDestroyed=n.__destroyed,n.emit("preget",{moldy:n,method:a,query:i,url:o,callback:u}),n.__destroyed=!1,c(n,null,i,a,o,function(t,e){n.emit("get",t,e),u.apply(n,[t,e])})},p.prototype.$url=function(t){var e=this,r=s.empty(e.$baseUrl())?"":e.$baseUrl(),n=s.empty(e.__name)?"":"/"+e.__name.trim().replace(/^\//,""),o=t||e.__url||"",a=r+n+(s.empty(o)?"":"/"+o.trim().replace(/^\//,""));return e.__url=o.trim().replace(/^\//,""),s.not.a.string(t)?a:e},p.prototype.__defaultMiddleware=y,p.prototype.$baseUrl=function(t){var r=this,n=u(t,"string",r.__baseUrl||"");return r.__baseUrl=n.trim().replace(/(\/|\s)+$/g,"")||e.baseUrl||"",s.not.a.string(t)?r.__baseUrl:r},p.prototype.$collection=function(e,n){var o=this,a=o.$url(),i="get",l=s.an.object(e)?e:{},y=s.a.func(e)?e:s.a.func(n)?n:r.noop;o.emit("precollection",{moldy:o,method:i,query:l,url:a,callback:y}),c(o,null,l,i,a,function(e,r){var n=u(r instanceof t||s.an.array(r)?r:null,"array",[]);o.emit("collection",e,n),y.apply(o,[e,n])})},p.prototype.$defineProperty=function(t,e,n){var a=t[e]||n,i=this.__metadata[e];if(!t.hasOwnProperty(e)||!t.__attributes.hasOwnProperty(e)){if((i.valueIsAnArrayMoldy||i.valueIsAnArrayString)&&(i.attributes.type=i.value,i.attributeArrayTypeIsAMoldy=i.valueIsAnArrayMoldy,i.attributeArrayTypeIsAString=i.valueIsAnArrayString,i.attributeTypeIsAnArray=!0),i.attributeTypeIsAnInstantiatedMoldy)Object.defineProperty(t,e,{value:i.attributes["default"],enumerable:!0}),t.__data[e]=t[e];else if(i.valueIsAStaticMoldy)Object.defineProperty(t,e,{value:new p(i.value.name,i.value).create(),enumerable:!0}),t.__data[e]=t[e];else if(i.attributeTypeIsAnArray){var c=o([]),l=i.attributeArrayTypeIsAString||i.attributeArrayTypeIsAMoldy?i.attributes.type[0]:"*";i.attributes.arrayOfAType=!0,Object.defineProperty(t,e,{value:c,enumerable:!0}),t.__data[e]=t[e],["push","unshift"].forEach(function(t){c.on(t,function(){var e=Array.prototype.slice.call(arguments),r=[];return e.forEach(function(t){if(i.attributeArrayTypeIsAMoldy){var e=new p(l.name,l),n=s.an.object(t)?t:i.attributes["default"];r.push(e.create(n))}else r.push(u(t,l,i.attributes["default"]))}),c["__"+t].apply(c,r)})}),a&&a.length>0&&a.forEach(function(r){t[e].push(r)})}else Object.defineProperty(t,e,{get:r.getProperty(e),set:r.setProperty(e),enumerable:!0});t.__attributes[e]=i.attributes}void 0!==a?t[e]=a:s.empty(t[e])&&i.attributes.optional===!1&&s.not.nullOrUndefined(i.attributes["default"])?t[e]=i.attributes["default"]:s.empty(t[e])&&i.attributes.optional===!1&&(t.__data[e]=i.attributeTypeIsAnArray||i.attributeTypeIsAnInstantiatedMoldy?t[e]:s.empty(i.attributes.type)?void 0:u(void 0,i.attributes.type))},p.prototype.$property=function(t,e){var n=this,o=new r.attributes(t,e),i=s.a.string(o.type)&&/moldy/.test(o.type),u=s.an.array(o.type),c=s.an.array(e)&&a(e[0],"properties","object"),l=s.an.array(e)&&s.a.string(e[0]),y=u&&a(o.type[0],"properties","object"),p=u&&s.a.string(o.type[0])&&s.not.empty(o.type[0]),f=a(e,"properties","object");return n.__metadata[t]={attributes:o,value:e,attributeTypeIsAnInstantiatedMoldy:i,attributeTypeIsAnArray:u,valueIsAnArrayMoldy:c,valueIsAnArrayString:l,attributeArrayTypeIsAMoldy:y,attributeArrayTypeIsAString:p,valueIsAStaticMoldy:f},n},n(p.prototype),l(p),p}},{"./helpers/index":20,"./request":23,"emitter-component":1,"sc-cast":2,"sc-haskey":5,"sc-is":7,"sc-merge":13,"sg-observable-array":15,useify:17}],23:[function(t,e){var r=t("sc-is"),n=(t("sc-cast"),t("sc-haskey"));e.exports=function(t,e,o,a,s,i){var u=t,c=[],l=n(o,u.__key)&&r.not.empty(o[u.__key])&&/get/.test(a),y=e?!0:!1,p=y?e.$isDirty():!1;u.__defaultMiddleware(function(t){var o=Array.prototype.slice.call(arguments),a=t===u?null:o.shift(),s=o.shift();!a||a instanceof Error||(a=new Error("An unknown error occurred")),!a&&y&&p&&r.object(s)&&l&&!n(s,u.__key)&&(a=new Error("The response from the server did not contain a valid `"+u.__key+"`")),!a&&p&&y&&r.object(s)&&(u[u.__key]=s[u.__key]),a||(y?(e.$data(s),c=e):r.array(s)?s.forEach(function(t){c.push(u.create(t))}):c=u.create(s)),i&&i(a,c)},t,o,a,s)}},{"sc-cast":2,"sc-haskey":5,"sc-is":7}]},{},[19])(19)});